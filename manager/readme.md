### 能力层

* 分布式锁
* 幂等处理
    
    
#### 幂等设计

常用的有两种方法

* 下游提供相应的查询系统
* 下游系统做幂等

**设计**

* 首先需要一个全局 ID
* 处理流程
    * add 操作
        * 每次操作，先查一下。要注意原子处理
        * 通过唯一索引
    * update 操作